\chapter{Experimental Methods} \label{ch_methods}

So far we discussed general aspects of dc-SQUIDs and how their working principle allows for highly sensitive measurements of magnetic flux changes. As already briefly seen in subsection \ref{subsec_para_res}, when it comes to practical SQUIDs many theoretical considerations regarding parameter optimization need to be reevaluated to account for usability in practical experiments. We begin this chapter with general concepts of a practical SQUID design and introduce a typical low-noise setup with a room temperature readout electronics. In this working group, SQUIDs are mainly developed for the readout of \textit{Metallic Magnetic Calorimeters (MMCs)} (see section \ref{sec_MMC}). We will see in the following how those SQUIDs need to be designed to optimize their coupling to these detectors. %Furthermore, this chapter will cover various methods to reduce quality factors of parasitic resonances, such as adding shunt resistors or coupling to normal conducting gold layers.

\section{Practical dc-SQUIDs}\label{sec_practical_SQUID}

The SQUIDs developed in this working group are primarily used as current sensors for the MMC readout by coupling the detected signals from the \textit{pickup coil} of the MMC to the parallel input coil of the SQUID. The need for this input coil entails a parasitic capacitance resulting in several resonances, as discussed in subsection \ref{subsec_para_res}. To achieve high inductive coupling between input coil and SQUID loop with inductances $L_{\rm i}$ and $L_{\rm s}$, respectively, it is necessary to fabricate them closely on top of each other, only separated by a thin insulating layer. The coupling strength is given by the dimensionless parameter 

\gl{
k_{\rm is} = \frac{M_{\rm is}}{\sqrt{L_{\rm i}L_{\rm s}}} \ \ , 
}{kis_theo} 

where $M_{\rm is}=\Delta\Phi_{\rm s}/\Delta I_{\rm i}$ is the mutual inductance, describing how much flux $\Delta\Phi_{\rm s}$ is generated in the SQUID loop for a current change $\Delta I_{\rm i}$ in the input coil. This allows us to define the so-called coupled energy sensitivity $\epsilon_{\rm c}(f)$ with respect to the input coil, which by using equation \ref{energy_sens} is given as

\gl{
\epsilon_{\rm c}(f) = \frac{\epsilon(f)}{k_{\rm is}^2} = \frac{L_{\rm i}S_{I\rm ,i}}{2} \ \ .
}{}

This expression refers to the apparent current noise $S_{I\rm ,i}=S_{\rm \Phi_s}/M_{\rm is}^2$, which is generated by the flux noise from the SQUID loop through the coupling $M_{\rm is}$. A strong coupling can be achieved by the commonly used square \textit{washer}-geometry with a planar input coil \cite{Jaycox1981}, as shown in figure \ref{abb:washer}. 

\figurecenter {t!}
{width=\textwidth}
{../Figures/Washergeometrie}
{0cm}   %vspace
{Schematic drawing of a typical planar thin-film dc-SQUID. The SQUID loop is realized as a square washer-geometry interrupted by a narrow slit, only connected at the junction area. A thin insulating layer separates the washer from the planar multi-turn input coil above. Left: View from the top. Right: Cross section marked by the dashed line.}
{washer}

Here, the SQUID loop is represented by the washer, whereas each turn of the input coil is located on top of it to maximize the coupling between both coils. A cross section of this setup is depicted in figure \ref{abb:washer} (right), showing the insulating dielectric layer separating each coil. The washer is intersected by a slit, which starts at the square hole in the middle and ends at the remotely situated junction area that connects each side of the loop. The total inductance of the SQUID loop can be calculated by adding the dominating washer hole inductance $L_{\rm h}$, the slit inductance $L_{\rm sl}\approx \qty{0.3}{\pH\per\um}$ given for small slit dimensions and the much smaller parasitic inductance $L_{\rm j}$ associated with the junction area, giving \cite{Ketchen1991}

\gl{
L_{\rm s} = L_{\rm h} + L_{\rm sl} + L_{\rm j} \ \ .
}{}

The latter is referred to as parasitic due to it's position outside of the input coil, thus not contributing to the coupling. By neglecting $L_{\rm sl}$ and $L_{\rm j}$, we can approximate the washer inductance in the limit of $d\ll w$ to $L_{\rm s}\approx L_{\rm h}\approx 1.25{\rm\mu_0}d$, where $d$ and $w$ are the inner and outer side lengths, respectively \cite{Jaycox1981}. This is a reasonable result considering that the supercurrent will only flow along the inner edge of the washer \cite{Ketchen1982}, thereby being independent of the outer side length $w$. The effective area $A_{\rm eff}$ of the SQUID loop has been calculated to $A_{\rm eff}\approx dw$ \cite{Ketchen1985}, showing that this geometry allows for high sensitivity while keeping the SQUID inductance small. The input coil inductance on the other hand can be approximated by $L_{\rm i}=L_{\rm str}+n^2L_{\rm s}$, where $L_{\rm str}$ is the stripline inductance (see section \ref{subsec_Li}) and $n$ is the number of input coil turns \cite{Jaycox1981}. The dc-SQUID designs used in this working group, however, are too complex to provide such analytical expressions and therefore need to be calculated numerically using simulation softwares such as \textit{InductEX}\footnote{SUNMagnetics, 15 De Beer Rd, Stellenbosch Central, Stellenbosch, 7600, South Africa}. 

\subsection{Gradiometer}\label{subsec_gradio}

The high flux sensitivity of a SQUID makes it prone to detect unwanted magnetic bias fields and/or gradients that may be present during its operation. Typical SQUIDs are therefore built in a gradiometric design to counteract this effect \cite{Ketchen1978}. A first order gradiometer consists of two identical conducting loops connected in series or parallel, with opposing orientation as shown in figure \ref{abb:gradiometer} (left, middle). Under the presence of a homogeneous bias field $\textbf{B}$ in \textit{x}-direction (perpendicular to the gradiometer plane), this configuration produces a zero net current after a field change $\Delta B_x$, due to the opposing currents induced in each turn. To also achieve the same effect for a field gradient $\frac{\del \textbf{B}}{\del z}$ or $\frac{\del \textbf{B}}{\del y}$, a second order gradiometer composed of four loops in series or parallel is required, see figure \ref{abb:gradiometer} (right), where only the currents induced in the upper loops are drawn for the sake of overview. In order to incorporate this into a practical SQUID, the input coil and the SQUID loop will consist of four serial and parallel turns, respectively. This configuration enables to combine a small SQUID inductance with a large input coil inductance while maintaining a strong coupling between the two, as each turn of both coils can be produced with similar dimensions. The low SQUID inductance results from the reciprocal summation over each loop inductance $L_{\rm l}$ due to the parallel connection, giving

\gl{
L_{\rm s} = \frac{L_{\rm l}}{4} \ \ .
}{}

Whereas a serial gradiometer gives 

\gl{
L_{\rm i} = 4L_{\rm l}
}{}

for the input coil. This gradiometric setup allows for adapting the input coil to the pickup coil of an MMC by choosing a large enough inductance $L_{\rm i}$, which will be discussed in chapter \ref{ch_SQUIDdesign}. 

\figurecenter {t!}
{width=\textwidth}
{../Figures/Gradiometer}
{0cm}   %vspace
{Schematic examples of a gradiometric dc-SQUID configuration threaded by a homogeneous magnetic field $\textbf{B}$. A first order gradiometer can be realized by either connecting two loops in series (left) or in parallel (middle). A magnetic field change $\Delta B_{\rm x}$ induces two opposing currents that cancel each other out. Right: Second order gradiometer consisting of four loops connected in series. This geometry results in a net zero current also for an applied field gradient $\frac{\del \textbf{B}}{\del z}$. For the sake of clarity, the currens induced in the two bottom loops are omitted.}
{gradiometer}
   
\section{Operation of a dc-SQUID}\label{sec_operation}


The SQUIDs developed within the scope of this thesis are produced in the institute's cleanroom and then tested both in a single- and a two-stage setup (see subsection \ref{subsec_2stage_theo}). The measurements described in chapter \ref{ch_results} are carried out at either $T=\qty{4.2}{\kelvin}$ in a liquid helium transport vessel or in a dilution cryostat BF-LD250 from BlueFors\footnote{BlueFors Cryogenics Oy, Arinatie, 00370 Helsinki, Finnland} with a base temperature of $T=\qty{10}{\milli\kelvin}$. The former submerges the SQUIDs in liquid helium via a dipstick, which provides a sample holder for PCBs. The SQUIDs are glued onto those PCBs and are electrically connected to them via aluminum bond wires, by utilizing the bond pads shown in figure \ref{abb:damped_chip}. The sample holder is equipped with both a superconducting (niobium) and a soft-magnetic Cryoperm shield to suppress external magnetic fields. The read-out is done by a broadband SQUID electronics of the type XXF-1 (see subsection \ref{subsec_fll}) to both supply the necessary bias and ramp current signals to the SQUID as well to provide the FLL feedback. The SQUID electronics is controlled via software and the voltage output observed on a Keysight InfiniiVision\footnote{Keysight Technologies Deutschland GmbH, Herrenberger Straße 130, 71034 Böblingen} oscilloscope.  

\subsection{Flux-Locked Loop}\label{subsec_fll}

We have seen in section \ref{sec_voltagestate} that the periodic $V\Phi$-characteristic provides an approximately linear dependence at $\Phi = (2n+1)\frac{\Phi_0}{4}$, which only holds for $\Delta\Phi\approx\Phi_0/4$. This restricts the dynamic range greatly, as the linearity vanishes for larger flux changes and for $\Delta\Phi>\Phi_0/2$ the voltage even becomes ambiguous. Such behavior is unsuitable for MMC readout, as they require the highest possible signal to noise ratio and therefore a linearized output voltage. 

The standard readout method involves a flux feedback circuit to maintain the operation at the working point independently of the flux change amplitude \cite{Drung2002}. This so-called flux-locked loop (FLL) readout technique first amplifies the output signal of the SQUID $V_s$ with a differential amplifier operated at room temperature, where the voltage $V_{\rm b}$ corresponding to the working point is provided by a voltage source on the second amplifier input. This voltage compensation at the working point ensures that only variations $\Delta V = V_{\rm s}-V_{\rm b}$ that correspond to the flux change $\Delta\Phi$ are amplified. The signal is then fed into an integrator, which integrates it over time and thus creates a rising output voltage $V_{\rm out}$. By now connecting a feedback resistance $R_{\rm fb}$ to the output circuit, a rising feedback current $I_{\rm fb}$ emerges that flows to a feedback coil with inductance $L_{\rm fb}$. This coil is coupled to the SQUID analogous to the input coil (see chapter \ref{ch_SQUIDdesign}), but with the opposite orientation. A compensation flux $-\Delta\Phi$ is generated up until the initial flux change is fully canceled out, i.e. $V_{\rm s}\to 0$. The integrator will therefore approach a constant value due to the vanishing voltage at the input circuit. This voltage signal is proportional to the current that was needed to completely compensate for the input signal that induced $\Delta\Phi$, leading to the relation 

\gl{
V_{\rm out} = \frac{R_{\rm fb}}{M_{\rm fb}}\Delta\Phi \ \ .	
}{} 

\figurecenter {t!}
{width=\textwidth}
{../Figures/FLL}
{0cm}
{Schematic circuit diagram of a flux-locked loop dc-SQUID readout. The amplified and integrated SQUID voltage signal $V_{\rm s}$, which is caused by a detected flux change $\Delta\Phi$, is fed back to a feedback coil with inductance $L_{\rm fb}$, creating a compensating flux $-\Delta\Phi$. This enables the operation at the working point, while flux changes far greater than $\Phi_0/4$ can be linearized.} 
{FLL}

A schematic for this readout process is shown in figure \ref{abb:FLL}.  With this setup the SQUID is used as a null-detector that allows for the linearization of the quantity of interest, while also providing a large dynamic range. A state-of-the-art, low-noise SQUID readout electronic by the company Magnicon\footnote{Magnicon GmbH, Barkahusenweg 11, 22339 Hamburg} of the type XXF-1, which is used in this working group, provides the necessary current and voltage sources, as well as the room temperature amplifiers within the FLL circuit described above. This SQUID electronics exhibits an intrinsic voltage noise of $\sqrt{S_{V\rm ,el}}\approx\qty{0.33}{\nV\per\sqrthz}$ and intrinsic current noise of $\sqrt{S_{I\rm ,el}}\approx\qty{2.6}{\pA\per\sqrthz}$ \cite{Drung2006}. The included current source for the feedback coil couples current noise into the SQUID. In the work of \cite{Kaap2020}, this contribution was determined to $\sqrt{S_{I,\rm \Phi}}=\qty{2.4}{\pA\per\sqrthz}$ for the white noise and $\sqrt{S_{I,\rm \Phi}}=\qty{10}{\pA\per\sqrthz}$ for the $1/f$ component at \qty{1}{\Hz}. Furthermore, a large amplifier bandwidth of $\qty{6}{\MHz}$ is provided to ensure high sensitivity for short signal rise times. The intrinsic noise of the SQUIDs produced in this working group, however, typically reaches values of $\sqrt{S_{\Phi_{\rm s}}}\leq\qty{1}{\micro\fq\per\sqrthz}$. Adding these terms together leads to the total apparent flux noise in the SQUID, which is expressed as the spectral power density

\gl{
S_{\rm \Phi_s,SQ} = S_{\rm \Phi_s} + \frac{S_{V\rm ,el}}{V_{\rm \Phi_s}^2} + \frac{S_{I\rm ,el}}{I_{\rm \Phi_s}^2} + S_{I,\rm \Phi}M_{\rm fb}^{2}\ \ .
}{singlestage_noise}  

Typical values for the transfer coefficients of SQUIDs produced within the scope of this thesis, are $V_{\rm \Phi_s}=\qty{80}{\uV\per\fq}$ and $I_{\rm \Phi_s}=\qty{20}{\uA\per\fq}$, leading to the SQUID electronics having a total noise contribution of $\qty{4.13}{\micro\fq\per\sqrthz}$. The amplifier noise therefore dominates the noise level, thereby deteriorating the signal to noise ratio. To avoid this effect, a second SQUID is typically added to act as a low temperature amplifier \cite{Welty1993}. This method significantly reduces the apparent flux noise in the detector SQUID, which is crucial for MMC readout, as the intrinsic noise of a MMC detector should not be lower than that of the readout electronics.


\subsection{Two-Stage Configuration}\label{subsec_2stage_theo}

Implementing a low temperature amplifier is usually realized through a second stage SQUID, situated between the first stage (detector) SQUID and the room temperature amplifier, as depicted in figure \ref{abb:2stage_schem}. Here, the subscripts 's' and 'x' refer to the first and second stage, respectively. The first stage SQUID, also referred to as a Front-End SQUID, is typically operated in a voltage bias for this two-stage setup. This can be achieved by connecting a gain resistor $R_{\rm g}$ in parallel with both the Front-End and the input coil of the amplifier SQUID. If a bias current $I_{\rm b,s}$ is injected into the circuit, all the current will flow through the Front-End, as long as it stays superconducting. Once it becomes normal conducting by further increasing $I_{\rm b,s}$, the current will start shifting to $R_{\rm g}$, whose resistance is chosen to be much smaller than the dynamic resistance $R_{\rm dyn}$ of the first stage SQUID, until most of the current flows through $R_{\rm g}$. At this point, the resulting voltage across both components becomes approximately constant. This behavior can be visualized through a loadline created by the parallel resistances, which intersects the IVC of the Front-End. The loadline voltage $V_{\rm s}$ between both extremal IV curves will then remain nearly constant, as the slope is given by the small gain resistance $R_{\rm g}$. If a detector signal is now coupled into the Front-End through the input coil with $M_{\rm is}$ , the current in the SQUID will move along the loadline in the $I\Phi$-plane, corresponding to the externally induced flux $\Phi_{\rm s}$. The attached input coil of the second stage SQUID would experience these current changes, hence creating a flux change $\Delta\Phi_{\rm x}$ in the amplifier SQUID, which is operated in a current bias. To maximize the amplification, the second stage SQUID is typically realized as a $N$-SQUID series array consisting of $N$ serially connected identical SQUID cells. This results in a large voltage drop across the array, given by $V_{\rm array}=NV_{\rm cell}$. Analogous to the single stage readout, the signal will then be amplified at room temperature and fed back to a feedback coil with mutual inductance $M_{\rm fs}$ to compensate for the initial flux change $\Delta\Phi_{\rm s}$. An additional feedback coil with mutual inductance $M_{\rm fx}$, spanning symmetrically across every SQUID cell couples a constant flux offset through a bias current $I_{\rm \Phi_x}$ into the array in order to maintain it at its working point. The resulting two-stage $V_{\rm x}\Phi_{\rm s}$-characteristic will strongly depend on the flux gain defined as

\gl{
G_{\rm \Phi} = \frac{\del\Phi_{\rm x}}{\del\Phi_{\rm s}} = \frac{M_{\rm ix}}{R_{\rm g} + R_{\rm dyn}}V_{\rm \Phi_s}	\approx \frac{M_{\rm ix}}{R_{\rm dyn}}V_{\rm \Phi_s} \ \ ,
}{} 

which relates the flux change induced in the second stage SQUID with a given flux change in the detector SQUID. For $\Delta\Phi_{\rm x}=\Delta I_{\rm s}M_{\rm ix}>\Phi_0/2$, additional minima and maxima emerge. These start to overlap for $\Delta\Phi_{\rm x}>\Phi_0$, thereby creating multiple working points that prevent a practical FLL operation. This sets an upper limit for the flux gain, however, it should be chosen as large as possible to reduce the apparent flux noise of the Front-End SQUID. An optimal flux gain has been calculated to $G_{\rm \Phi}\approx\pi$, corresponding to $\Delta\Phi_{\rm x}\approx\Phi_0/2$ \cite{Drung1996a}. \\

\figurecenter {t!}
{width=\textwidth}
{../Figures/2stage}
{0cm}
{Schematic circuit diagram of a two-stage dc-SQUID based readout. The first stage consisting of the detector SQUID is connected in parallel with a gain resistor $R_{\rm g}$. The detector signal $I_{\rm det}$ induces a current change $\Delta I_{\rm s}$ and therefore a flux change $\Delta\Phi_{\rm x}$ in the second stage SQUID, which acts as a low temperature preamplifier. In FLL mode, the signal will be fed back to compensate for the initial flux change $\Delta\Phi_{\rm s}$, thereby linearizing the detector signal. Choosing an N-SQUID series array amplifies the voltage swing and transfer coefficient, thus significantly reducing the overall apparent flux noise in the detector SQUID.} 
{2stage_schem}

The two-stage setup contributes additional noise sources to equation \ref{singlestage_noise}, namely the gain resistor and the amplifier SQUID. However, the resulting conversion to the flux $\Phi_{\rm s}$ of the detector SQUID significantly reduces the influence of the room temperature amplifier, which in turn strongly improves the overall signal to noise ratio. The total apparent flux noise of the Front-End then reads \cite{Drung1996a}

\gl{
S_{\rm \Phi_s,SQ} = S_{\rm \Phi_s} + \frac{4k_{\rm B}TR_{\rm g}}{G_{\rm \Phi}^{2}(R_{\rm g}+R_{\rm dyn})^{2}}M_{\rm ix}^{2} + \frac{S_{\rm \Phi_x}}{G_{\rm \Phi}^{2}} + \frac{S_{V,\rm el}}{G_{\rm \Phi}^{2}V_{\rm \Phi_x}^{2}} + \frac{S_{I,\rm el}}{G_{\rm \Phi}^{2}I_{\rm \Phi_x}^{2}} + \frac{S_{I,\Phi_{\rm x}}M_{\rm fx}^{2}}{G_{\rm \Phi}^{2}}\ \ .
}{total_apparent_fluxnoise_2stage} 

The second term describes the Nyquist current noise caused by the gain resistor, which becomes negligible with a voltage biased detector SQUID where $R_{\rm g}\ll R_{\rm dyn}$. The low temperature amplifier (array), the feedback coil current source as well as the room temperature amplifier contributions are reduced by the flux gain parameter, which can't be chosen arbitrarily large as mentioned above. However, using a SQUID array for the second stage increases the voltage swing and thus the transfer coefficient by an $N$-fold, i.e. $V_{\rm \Phi_x} = NV_{\rm \Phi_{cell}}$, where the subscript 'cell' refers to a single array SQUID cell. Consequently, the total noise level can be further reduced by choosing a high number $N$ of SQUID cells. Here it is noteworthy, however, that these considerations only account for the magnetic flux in a single cell, as otherwise the transfer coefficient would remain constant \cite{Stawiasz1993},\cite{Foglietti1993}.  Now, using equation \ref{fluxnoise_psd} we obtain for the SQUID array flux noise

\gl{
\sqrt{S_{\rm \Phi_x}} = \frac{\sqrt{S_{\rm V_x}}}{V_{\rm \Phi_x}} = \frac{\sqrt{NS_{\rm V_{cell}}}}{NV_{\rm \Phi_{cell}}} = \frac{1}{\sqrt{N}}\sqrt{S_{\rm \Phi_{cell}}} \ \ ,
}{}   

hence the intrinsic noise of the second stage gets reduced by a factor of $\frac{1}{\sqrt{N}}$ \cite{Stawiasz1993}. This also has a consequence for the coupled energy sensitivity of the SQUID array, which is calculated by summing the array flux noise over all $N$ cells, giving

%since the total array inductance is the sum of all SQUID cell inductances leading to $L_{\rm x}=NL_{\rm cell}$. Therefore, the coupled energy sensitivity is given by 

%\gl{
%\epsilon_{\rm c,x} = \frac{\epsilon_{\rm x}(f)}{k_{\rm ix}^{2}}	= \frac{S_{\rm \Phi_x}}{2L_{\rm x}k_{\rm ix}^{2}}
%}{}

\gl{
\epsilon_{\rm c,x} = N\frac{S_{\rm \Phi_x}}{2L_{\rm cell}k_{\rm i,cell}} = \frac{S_{\rm \Phi_{cell}}}{2L_{\rm cell}k_{\rm i,cell}} \ \ .	
}{}

Where the parameter $k_{\rm i,cell}$ denotes the coupling of a cell with inductance $L_{\rm cell}$ to its respective input coil segment. Connecting \textit{N} SQUIDs in series did therefore not affect the energy sensitivity, provided that $k_{\rm i,cell}$ remains constant across the array. The arrays produced in this working group either contain 16 \cite{Kempf2015} or 18 \cite{Kraemer2023} cells. Applying this to equation \ref{total_apparent_fluxnoise_2stage}, we would reduce the above-mentioned contribution of the room temperature amplifier flux noise of \qty{4.13}{\micro\fq\per\sqrthz} to \qty{0.29}{\micro\fq\per\sqrthz} and \qty{0.26}{\micro\fq\per\sqrthz} for $N=16$ and $N=18$, respectively. Provided an optimal flux gain of $G\approx\pi$, the noise contribution would further decrease to \qty{0.09}{\micro\fq\per\sqrthz} or \qty{0.08}{\micro\fq\per\sqrthz}, well below the typical noise level of a detector SQUID. \\

Besides the improvement of the noise behavior, a major advantage of a two-stage readout setup consists of the low power dissipation produced by the detector SQUID. As opposed to the current bias operation in a single-stage setup, the Front-End is held at a constant, low voltage, such that the dissipated power given by $P=UI$ only consists of approximately \qty{1}{\nW} \cite{Drung2007}. However, this amount poses a problematic heat source for low temperature detectors consisting of up to millions of temperature-sensitive calorimeter pixels, such that using a two-stage setup for each pixel is unfavorable. For these, a different approach using time- or frequency-division dc-SQUID multiplexing is followed. These readout techniques constitute a research focus in this working group in order to optimize the readout of several experiments such as the ECHo experiment \cite{Gastaldo2017}.





\section{Metallic Magnetic Calorimeters} \label{sec_MMC}

Low temperature detectors used in this working group exhibit detector arrays consisting of metallic magnetic calorimeters pixels, which are able to absorb and detect photons (X-rays) or heavy particles. The focus of this thesis is to improve the dc-SQUID based MMC readout, which is why we first briefly cover the working principle of such calorimeters. \\ 
A general overview of the detector setup can be seen in figure \ref{abb:MMC_schematic}. The upper part consists of a particle absorber, which, following the law of energy conservation, converts the energy $E$ of an incoming particle into a change in temperature $\Delta T$ in the absorber. A paramagnetic sensor is directly attached below, submerged in a weak magnetic field. Strong thermal coupling allows for an effective temperature increase in the sensor, which is given by the total heat capacity $C_{\rm tot}$ of both the sensor and the absorber, resulting in 

\gl{
\Delta T \approx \frac{E}{C_{\rm tot}} \ \ .
}{1st_law_of_TD}

Not shown in figure \ref{abb:MMC_schematic} is an underlying thermal bath weakly linked to the sensor, which reverts the temperature change by an exponential decay of the signal until the thermal equilibrium is reached. The paramagnetic nature of the sensor changes its magnetization $M(T)$ upon a temperature rise, according to the Curie law $M\propto \frac{1}{T}$ for low temperatures. This induces a magnetic flux change $\Delta\Phi$ proportional to $\Delta M$, which is detected by a meander-shaped pickup coil that is strongly coupled to the sensor. The input coil of the SQUID is directly connected to the pickup coil forming a flux transformer, thereby enabling the readout of the created current signal $\Delta I_{\rm det}$. With equation \ref{1st_law_of_TD} we can write for the induced flux in the SQUID  

\gl{
\Delta\Phi_{\rm s} \propto \Delta\Phi \propto \Delta M \approx\frac{\del M}{\del T}\frac{E}{C_{\rm tot}} \ \ ,
}{}

\figurecenter {t!}
{width=\textwidth}
{../Figures/Detektorgeometrie}
{0cm}
{Schematic depiction (left) and circuit diagram (right) of a common MMC channel consisting of two pixels. The planar particle absorber is fabricated on top of the paramagnetic sensor, separated by cylinder-shaped posts to prevent energy losses through athermal phonons, while still providing good thermal coupling. Below the sensors two meander-shaped pickup coils connected in parallel detect the flux change $\Delta\Phi$, which can be precisely measured with a SQUID as a flux transformer. The grey dots and crosses within the meander mark a magnetic field induced by the bias current $I_{\rm 0}$. The figure was adapted from \cite{Bauer2022}.} 
{MMC_schematic}

provided the deposited energy $E$ is small. Evidently, it is desirable to both reduce the heat capacity and increase the magnetization gradient in order to maximize the flux change $\Delta\Phi$. Another important aspect are short signal rise times that can be realized by a high thermal conductivity of the sensor and the absorber, which is particularly crucial for coincidence measurements. All these material-dependent requirements are fulfilled for the normal conducting metal gold as an absorber material and gold or silver for the sensor. The latter needs to be doped with a few hundred ppm of the rare-earth metal erbium in order to obtain paramagnetic properties. State-of-the-art MMCs of this kind are successfully developed in this working group, providing an exceptional energy resolution, a large energy bandwidth and fast signal rise times well below \qty{100}{\nano\s} \cite{Kempf2018}. \\

The detector geometry shown in figure \ref{abb:MMC_schematic} is widely used in this working group. Two meander-shaped pickup coils, each with an inductance $L_{\rm m}$, are connected as a parallel gradiometer and are located beneath their respective sensor pixel, with a connection to the input coil of the flux transformer. As the SQUID is typically placed far away to mitigate the influence of its heat dissipation, a parasitic inductance $L_{\rm par}$ needs to be taken into account due to the wiring between the SQUID and the detector (figure \ref{abb:MMC_schematic}, right). A constant small bias current $I_{\rm 0}$ is injected into the pickup coils to provide the weak bias field needed for the paramagnet. If now a particle gets detected by one of the absorbers, a flux change $\Delta\Phi$ and thus a current is induced in the meander. By applying Kirchhoffs first law and knowing that magnetic flux in a closed superconducting loop is conserved \cite{Landau1960}, we can calculate the resulting current signal in the input coil to \cite{Burck2004}

\gl{
\Delta I_{\rm det} = \frac{\Delta\Phi}{L_{\rm m} + 2(L_{\rm i} + L_{\rm par})} \ \ .
}{meander_deltaI}

A significant advantage of this setup lies in the fact, that only one SQUID is needed to readout two pixels. The gradiometer geometry ensures, that depending on which absorber gets hit, the current $\Delta I_{\rm det}$ will flow in one direction or the other. Thus, every pixel can be assigned a polarity of the resulting flux in the SQUID loop, making them distinguishable. Together with the mutual inductance $M_{\rm is}=\frac{\Delta\Phi}{\Delta I_{\rm det}}$ between the input coil and the SQUID loop, we can now introduce the flux-to-flux coupling 

\gl{
\frac{\Delta\Phi_{\rm s}}{\Delta\Phi} = \frac{M_{\rm is}}{L_{\rm m} + 2(L_{\rm i} + L_{\rm par})} \ \ ,
}{meander_ftf}

which by considering equation \ref{kis_theo} is maximal for $L_{\rm i}=\frac{L_{\rm m}}{2}+L_{\rm par}$. This crucial parameter is a measure for the flux gain and gives therefore information about the quality of the readout setup. Consequently, it is desirable to choose the optimal input coil inductance $L_{\rm i}$ for a given pickup coil inductance $L_{\rm p}=\frac{L_{\rm m}}{2}$.

\subsection{Extrinsic Energy Sensitivity}\label{subsec_extr_sens_theo}

In this regard it is reasonable to discuss the noise behavior for this readout setup. Since noise can couple in both directions, the intrinsic flux noise of the SQUID will also couple into the pickup coil, creating the apparent flux noise $\sqrt{S_{\rm\Phi_{\rm s},p}}$ in the detector. To quantify this noise influence, we define the extrinsic energy sensitivity with respect to a given pickup coil inductance $L_{\rm p}$ analogous to equation \ref{energy_sens} as \cite{Knuutila1988}

\gl{
\epsilon_{\rm p} = \frac{S_{\rm \Phi_s,p}}{2L_{\rm p}} \ \ .
}{extr_energy_sens_simple}

Here, it is necessary to point out that the choice of a single coil with inductance $L_{\rm p}$ adds a factor of 2 to equations \ref{meander_deltaI} and \ref{meander_ftf}, such that the flux-to-flux coupling reads

\gl{
\frac{\Delta\Phi_{\rm s}}{\Delta\Phi_{\rm p}} = \frac{M_{\rm is}}{L_{\rm p} +  L_{\rm i} + L_{\rm par}} \ \ .
}{ftf_Lp}

%\gl{
%I_{\rm in} = \frac{\Delta\Phi_{\rm p}}{L_{\rm i} + L_{\rm par} + L_{\rm p}}
%}{}

This advantage in coupling, however, does not outweigh the above-mentioned benefit to readout two pixels with one read-out electronic, as the gradiometric design also cancels out unwanted signals through changes in external magnetic field or substrate temperature \cite{Mantegazzini2021}. In the following we consider the case for a single pickup coil with inductance $L_{\rm p}=\frac{L_{\rm m}}{2}$. The presence of a flux transformer is accompanied with a shielding effect with respect to the SQUID loop, such that the geometric inductance is reduced to an effective inductance given by \cite{Gross2016} 

\gl{
L_{\rm s}' = L_{\rm s}(1-k_{\rm is}^2s_{\rm i}) \ \ ,
}{eff_Ls}

where $s_{\rm in}=\frac{L_{\rm i}}{L_{\rm i} + L_{\rm p} + L_{\rm par}}$ denotes the screening factor \cite{Clarke2004}, which reaches the value of 0.5 for the condition $L_{\rm i}=L_{\rm p}+L_{\rm par}$ that maximizes the flux-to-flux coupling. By now using the relation $\frac{\Delta\Phi_{\rm s}}{\Delta\Phi_{\rm p}}=\frac{\sqrt{S_{\rm \Phi_s}}}{\sqrt{S_{\rm \Phi_s,p}}}$, we finally obtain with equation \ref{extr_energy_sens_simple} to \ref{eff_Ls} the extrinsic energy sensitivity \cite{Knuutila1988}

\gl{
\epsilon_{\rm p} = \frac{S_{\rm \Phi_s}(L_{\rm i} + L_{\rm par} + L_{\rm p})^{2}}{2L_{\rm p}M_{\rm is}^{2}} = \frac{S_{\rm \Phi_s}(L_{\rm i} + L_{\rm par} + L_{\rm m}/2)}{L_{\rm s}k_{\rm is}^{2}s_{\rm i}L_{\rm m}/2} \ \ .
}{extr_energy_sens}

This parameter is minimized by maximizing the flux-to-flux coupling $\frac{\Delta\Phi_{\rm s}}{\Delta\Phi_{\rm p}}$ as well as minimizing the intrinsic flux noise of the SQUID $S_{\rm \Phi_s}$ given by the expressions derived in subsection \ref{subsec_noise_theo}. Finding the minimum for the latter provides optimal values for the shunt resistors $R_{\rm s}$ and the SQUID loop inductance $L_{\rm s}$, as we will see in the following section.  

